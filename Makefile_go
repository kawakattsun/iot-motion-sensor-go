MAKE_GO := $(MAKE) -f Makefile_go

all:
	$(MAKE_GO) build

lint:
	sh scripts/go-lint.sh

clean: 
	rm -rf build/deploy/cmd/*

.PHONY: build
build: lint clean
	CGO_ENABLED=0 GOOS=linux GOARCH=arm GOARM=6 go build -v -installsuffix cgo -o ./build/deploy/cmd/${PROJECT_NAME} ./cmd/${PROJECT_NAME}/

test:
	go test -v $(TEST_TARGET)

exec:
	./build/deploy/cmd/${PROJECT_NAME} \
		-host-name a2gqticjnd0pk-ats.iot.ap-northeast-1.amazonaws.com \
		-client-id seeds-meeting-room-notify-1 \
		-client-certificate 85f039bf41-certificate.pem.crt \
		-ca-certificate root-CA.crt \
		-private-key 85f039bf41-private.pem.key \
		-thing-name seeds-meeting-room-notify
